import{e as $,k as T,Q,l as q}from"./use-quasar.01040f3a.js";import{c as z,r as d,N as M,O,o as D,h as K,d as G,g as H,U as R,n as J,p as L,ao as W,_ as X,H as Y,v as k,I as Z,A as n,y as c,D as r,K as ee,B as x,x as B,al as E,au as te,av as oe}from"./index.1c233bb9.js";import{Q as N}from"./QCard.f1d513e0.js";import{Q as U}from"./QChip.3b3b6fd6.js";import{a as F}from"./index.2cf0d985.js";import"./use-dark.72d407d6.js";var ae=z({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validation-success","validation-error"],setup(e,{slots:a,emit:p}){const b=H(),f=d(null);let l=0;const t=[];function g(o){const u=[],w=typeof o=="boolean"?o:e.noErrorFocus!==!0,A=++l,_=(m,i)=>{p("validation-"+(m===!0?"success":"error"),i)};for(let m=0;m<t.length;m++){const i=t[m],C=i.validate();if(typeof C.then=="function")u.push(C.then(v=>({valid:v,comp:i}),v=>({valid:!1,comp:i,err:v})));else if(C!==!0){if(e.greedy===!1)return _(!1,i),w===!0&&typeof i.focus=="function"&&i.focus(),Promise.resolve(!1);u.push({valid:!1,comp:i})}}return u.length===0?(_(!0),Promise.resolve(!0)):Promise.all(u).then(m=>{const i=m.filter(j=>j.valid!==!0);if(i.length===0)return A===l&&_(!0),!0;const{valid:C,comp:v,err:I}=i[0];return A===l&&(I!==void 0&&console.error(I),_(!1,v),w===!0&&C!==!0&&typeof v.focus=="function"&&v.focus()),!1})}function y(){l++,t.forEach(o=>{typeof o.resetValidation=="function"&&o.resetValidation()})}function V(o){o!==void 0&&R(o);const u=l+1;g().then(w=>{u===l&&w===!0&&(e.onSubmit!==void 0?p("submit",o):o!==void 0&&o.target!==void 0&&typeof o.target.submit=="function"&&o.target.submit())})}function S(o){o!==void 0&&R(o),p("reset"),J(()=>{y(),e.autofocus===!0&&e.noResetFocus!==!0&&s()})}function s(){$(()=>{if(f.value===null)return;const o=f.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(f.value.querySelectorAll("[tabindex]"),u=>u.tabIndex>-1);o!=null&&o.focus({preventScroll:!0})})}L(W,{bindComponent(o){t.push(o)},unbindComponent(o){const u=t.indexOf(o);u>-1&&t.splice(u,1)}});let P=!1;return M(()=>{P=!0}),O(()=>{P===!0&&e.autofocus===!0&&s()}),D(()=>{e.autofocus===!0&&s()}),Object.assign(b.proxy,{validate:g,resetValidation:y,submit:V,reset:S,focus:s,getValidationComponents:()=>t}),()=>K("form",{class:"q-form",ref:f,onSubmit:V,onReset:S},G(a.default))}});const se=Y({setup(){const e=T(),a=d(""),p=d(""),b=d(!0),f=async()=>{try{(await F.post("https://tuenvio.followvip.tech/user/",{email:a.value,password:p.value},{headers:{accept:"application/json","Content-Type":"application/json"}})).status===200&&e.notify({message:"Cuenta Registrada",color:"positive",position:"top"})}catch(s){e.notify({color:"red-4",textColor:"white",icon:"check",message:String(s.response.data.detail)})}},l=d(""),t=d(""),g=d(!1),y=d(!1);return{email:a,password:p,isPwd:b,email_verificacion:l,password_change:t,verificada:g,noverficada:y,validarCuenta:async()=>{try{const s=await F.get(`https://tuenvio.followvip.tech/user/${l.value}`,{headers:{accept:"application/json"}});s.status===200&&(s.data.is_premium===!0?(g.value=!0,y.value=!1):(y.value=!0,g.value=!1))}catch(s){e.notify({color:"red-4",textColor:"white",icon:"check",message:String(s.response.data.detail)})}},actualizarContrase\u00F1a:async()=>{try{(await F.put("https://tuenvio.followvip.tech/user/",{email:l.value,password:t.value},{headers:{accept:"application/json","Content-Type":"application/json"}})).status===200&&e.notify({message:"Contrase\xF1a Actualizada",color:"positive",position:"top"})}catch(s){e.notify({color:"red-4",textColor:"white",icon:"check",message:String(s.response.data.detail)})}},registrar:f}}}),h=e=>(te("data-v-aab11ba6"),e=e(),oe(),e),ne={class:"q-pa-md fit row wrap justify-center items-start content-start"},re=h(()=>r("div",{class:"q-pa-md text-center"},[r("h5",null,"Registro de Cuentas")],-1)),ie=h(()=>r("div",{class:"q-pa-md text-center text-green"},[r("h6",null,"Suerte en su compra de combos")],-1)),le={class:"q-mx-auto q-pa-md q-gutter-y-md column",style:{"max-width":"300px"}},ue={class:"text-center q-pa-md"},ce=h(()=>r("div",null,null,-1)),de=h(()=>r("div",{class:"q-pa-md text-center"},[r("h5",null,"Verificar Cuenta")],-1)),pe=h(()=>r("div",{class:"q-pa-md text-center text-blue"},[r("h6",null," Si tiene algun problema con su cuenta verifique su cuenta o cambie su contrase\xF1a ")],-1)),fe={class:"q-mx-auto q-pa-md q-gutter-y-md column",style:{"max-width":"300px"}},me=h(()=>r("h6",null,"CUENTA PREMIUM",-1)),ve=h(()=>r("h6",null,"CUENTA SIN PAGAR",-1));function he(e,a,p,b,f,l){return k(),Z("div",ne,[n(N,{class:"q-ma-sm my-card"},{default:c(()=>[re,n(Q),ie,n(ae,{onSubmit:e.onSubmit},{default:c(()=>[r("div",le,[n(q,{filled:"",label:"Correo",modelValue:e.email,"onUpdate:modelValue":a[0]||(a[0]=t=>e.email=t),type:"email",rules:[t=>t&&t.length>0||"Campo obligatorio"]},null,8,["modelValue","rules"]),n(q,{modelValue:e.password,"onUpdate:modelValue":a[2]||(a[2]=t=>e.password=t),label:"Contrase\xF1a",filled:"",type:e.isPwd?"password":"text",rules:[t=>t&&t.length>0||"Campo obligatorio"]},{append:c(()=>[n(ee,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[1]||(a[1]=t=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type","rules"])]),r("div",ue,[n(x,{class:"q-ma-md",color:"negative",type:"submit",label:"Atras",to:"/"}),n(x,{class:"q-ma-md",color:"primary",type:"submit",label:"Registrar",onClick:e.registrar},null,8,["onClick"])])]),_:1},8,["onSubmit"]),ce]),_:1}),n(N,{class:"q-ma-sm my-card"},{default:c(()=>[de,n(Q),pe,r("div",fe,[n(q,{filled:"",label:"Correo a Verificar",modelValue:e.email_verificacion,"onUpdate:modelValue":a[3]||(a[3]=t=>e.email_verificacion=t),type:"email",rules:[t=>t&&t.length>0||"Campo obligatorio"]},{after:c(()=>[n(x,{round:"",dense:"",flat:"",icon:"search",onClick:e.validarCuenta},null,8,["onClick"])]),_:1},8,["modelValue","rules"]),e.verificada?(k(),B(U,{key:0,class:"q-pa-lg glossy",square:"",color:"positive","text-color":"white",icon:"verified"},{default:c(()=>[me]),_:1})):E("",!0),e.noverficada?(k(),B(U,{key:1,class:"q-pa-lg glossy",square:"",color:"negative","text-color":"white",icon:"highlight_off"},{default:c(()=>[ve]),_:1})):E("",!0),n(q,{modelValue:e.password_change,"onUpdate:modelValue":a[4]||(a[4]=t=>e.password_change=t),label:"Nueva Contrase\xF1a",filled:"",type:e.isPwd?"password":"text",rules:[t=>t&&t.length>0||"Campo obligatorio"]},{after:c(()=>[n(x,{round:"",dense:"",flat:"",icon:"send"})]),_:1},8,["modelValue","type","rules"])])]),_:1})])}var qe=X(se,[["render",he],["__scopeId","data-v-aab11ba6"]]);export{qe as default};
